# Undercurl
set -g default-terminal "tmux-256color"
set-option -gas terminal-overrides "*:Tc" # true color support
set-option -gas terminal-overrides "*:RGB" # true color support
set -as terminal-overrides ',*:Smulx=\E[4::%p1%dm'  # undercurl support
set -as terminal-overrides ',*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m'  # underscore colours - needs tmux-3.0

# Status bar
set-option -g status-style bg=#121212,fg=#f5f5f5 
 
set-option -g status-left ' #S - '
set-option -g status-right '#[fg=#f5f5f5]#(whoami)#[fg=#ff0088]@#[fg=#949494]#(hostname -s) '

# Windows
setw -g window-status-format '#I:#W '
setw -g window-status-style fg=#949494 
setw -g window-status-current-style fg=#f5f5f5,bold
setw -g window-status-current-format '#[fg=#f5f5f5]#I:#W '

# Panes
set -g pane-border-style 'fg=#323232'
set -g pane-active-border-style 'fg=#323232'

set -g default-shell $HOME/.nix-profile/bin/zsh
set-option -g default-shell $HOME/.nix-profile/bin/zsh
set -g default-command $HOME/.nix-profile/bin/zsh
set-option -g status-position top
set -g base-index 1
setw -g pane-base-index 1

set-option -g history-limit 50000

# Remove Vim mode delays
set-option -g escape-time 10
set -g focus-events on
set -g status-left-length 90
set -g status-right-length 90
set -g status-justify left

# -----------------------------------------------------------------------------
# Key bindings
# -----------------------------------------------------------------------------
set -g mouse on
set -g mode-keys vi

# Unbind default keys
unbind C-b
unbind '"'
unbind %

# remap prefix from 'C-b' to 'C-space'
set-option -g prefix C-space
bind C-space send-prefix

# Split panes, vertical or horizontal
bind x split-window -v
bind v split-window -h

# Move around panes with vim-like bindings (h,j,k,l)
bind k select-pane -U
bind h select-pane -L
bind j select-pane -D
bind l select-pane -R

bind t display-popup -E "tmux new-session -A -s scratch"

bind r source-file $HOME/.config/tmux/tmux.conf

bind S command-prompt -p "New Session:" "new-session -A -s '%%'"
bind K confirm kill-session
